<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"  lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0"/>
  <link th:href="@{/css/main.css}" rel="stylesheet" />
  <title>Netflix Watch History Analyzer</title>
</head>

<body>
<header>
  <h1> Netflix Watch History Analyzer</h1>
</header>

  <div class="container">
    <div>

      <div>
        <div class="upload-container">
          <h2>Welcome</h2>
          Upload ViewingActivity.csv file which is received from Netflix.
          Once Uploaded, this application will analyze that file and show information in simple format.
          <div>
            <br/>
            <div>
              <form
                      id="uploadFile"
                      method="post"
                      th:action="@{/upload}"
                      enctype="multipart/form-data">
                <input id="input-file" type="file" name="file"/>
                <button type="submit">
                  Upload
                </button>
              </form>
            </div>
          </div>
        </div>

        <div th:if="${watchedContentByProfile !=null &&  watchedContentByProfile.size() > 0}">
          <h3>Viewing Summary By Profile</h3>
          <table>
            <thead>
            <tr>
              <th scope="col">Profile</th>
              <th scope="col">Year</th>
              <th scope="col">Total Watched</th>
              <th scope="col">Duration</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="content : ${watchedContentByProfile}">
              <td>[[${content.profile}]]</td>
              <td>[[${content.year}]]</td>
              <td>[[${content.total}]]</td>
              <td>[[${content.totalDuration}]]</td>
            </tr>
            </tbody>
          </table>
        </div>

        <div th:if="${watchedContentByDevice != null && watchedContentByDevice.size() > 0}">
          <h3>Viewing Summary By Device</h3>
          <table>
            <thead>
            <tr>
              <th scope="col">Device</th>
              <th scope="col">Year</th>
              <th scope="col">Total Watched</th>
              <th scope="col">Duration</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="content : ${watchedContentByDevice}">
              <td>[[${content.profile}]]</td>
              <td>[[${content.year}]]</td>
              <td>[[${content.total}]]</td>
              <td>[[${content.totalDuration}]]</td>
            </tr>
            </tbody>
          </table>
        </div>


    </div>
  </div>
  </div>
</body>
</html>

